!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="assets/",t(0)}([function(e,t,n){var i,o=function(e,t){return function(){return e.apply(t,arguments)}};i=function(e){var t,i,r,a;return i=window.THREE,r=n(1),a=n(2),window.EditorUI=t=function(){function e(){this.initAdd=o(this.initAdd,this),this.initRemove=o(this.initRemove,this),this.onMenuCreated=o(this.onMenuCreated,this);var e,t,n,a,s,d,c,u;this.tweenTime=window.tweenTime,this.editor=new r(this.tweenTime,{json_replacer:function(e,t){return"container"===e?void 0:"parent"===e?void 0:"children"===e?void 0:"object"===e?void 0:"classObject"===e?void 0:t}}),this.onMenuCreated($(".timeline__menu")),e=$(window.app.containerWebgl),a=new i.Vector3,d=new i.Projector,n=new i.Vector2,c=!1,u=new i.Vector3,s=new i.Mesh(new i.PlaneBufferGeometry(3e3,2e3,8,8),new i.MeshBasicMaterial({color:16711680,opacity:.25,transparent:!0})),s.visible=!1,t=function(e){return function(){var e,t,o;return e=window.activeCamera,o=new i.Vector3(n.x,n.y,.5).unproject(e),t=new i.Raycaster(e.position,o.sub(e.position).normalize())}}(this),e.mousedown(function(e){return function(n){var i,o,r;return n.preventDefault(),r=t(),o=r.intersectObjects(window.app.scene.children),o.length&&(i=o[0].object,i._data)?(e.editor.selectionManager.select(i._data),c=i,u=c.position.clone(),o=r.intersectObject(s),a.copy(o[0].point).sub(s.position)):void 0}}(this)),$(window).mouseup(function(e){return function(e){return c=!1}}(this)),e.mousemove(function(i){return function(o){var r,d,p,l,m,w;return n.x=o.clientX/e.width()*2-1,n.y=2*-(o.clientY/e.height())+1,c&&c._data?(l=i.tweenTime.getProperty("x",c._data),m=i.tweenTime.getProperty("y",c._data),w=t(),r=w.intersectObject(s),d=r[0].point.sub(a),p=u.clone().add(d),i.tweenTime.setValue(l,p.x),i.tweenTime.setValue(m,p.y),c._data._isDirty=!0,i.editor.timeline._isDirty=!0):void 0}}(this))}return e.prototype.onMenuCreated=function(e){return e.append('<a class="menu-item menu-item--remove">Remove</a>'),e.prepend('<span class="menu-item">Add<div class="submenu submenu--add"></div></span>'),this.initAdd(e),this.initRemove(e)},e.prototype.initRemove=function(e){var t,n,i;i=this,n=i.editor.selectionManager,t=window.tweenTime.data,e.find(".menu-item--remove").click(function(e){var o,r,s,d,c,u;for(e.preventDefault(),u=n.selection,d=0,c=u.length;c>d;d++)s=u[d],o=a.select(s).datum(),r=t.indexOf(o),o&&o.type&&o.id&&r>-1&&(t.splice(r,1),o.object&&(o.object.destroy(),delete o.object));n.reset(),i.editor.render(!1,!1,!0)})},e.prototype.initAdd=function(e){var t,n,i,o,r,a;if(window.ElementFactory){t=e.find(".submenu--add"),r=window.ElementFactory.elements,a=this;for(o in r)i=r[o],n=$('<a href="#" data-key="'+o+'">'+o+"</a>"),t.append(n);t.find("a").click(function(e){var t,n,i,r,s,d;e.preventDefault(),o=$(this).data("key"),ElementFactory.elements[o]&&(t=a.tweenTime.data,d=t.length+1,r="item"+d,s=o+" "+d,n=a.tweenTime.timer.time[0]/1e3,i={isDirty:!0,id:r,label:s,type:o,start:n,end:n+2,collapsed:!1,properties:ElementFactory.getTypeProperties(o)},a.tweenTime.data.push(i),a.editor.timeline._isDirty=!0)})}},e}()}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){e.exports=TweenTime.Editor},function(e,t,n){e.exports=d3}]);
//# sourceMappingURL=Editor.js.map